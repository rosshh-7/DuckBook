{"ast":null,"code":"var _jsxFileName = \"D:\\\\554\\\\code-warriors\\\\client\\\\src\\\\components\\\\ViewRequests.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Navigation from \"./Navigation\";\nimport FriendCard from \"./FriendCard\";\nimport \"../App.css\";\nimport logoImg from \"../images/logo.gif\";\nimport maleUser from \"../images/male-user.svg\";\nimport femaleUser from \"../images/female-user.svg\";\nimport otherUser from \"../images/other.svg\";\nimport $, { event } from \"jquery\";\nimport { Modal } from \"bootstrap\";\nimport axios from \"axios\";\nimport { Form, FloatingLabel, Button, Row, Col } from \"react-bootstrap\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate, Navigate } from \"react-router-dom\";\nimport cryptojs from \"crypto-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ViewRequests() {\n  _s();\n\n  const [loading, setLoading] = useState(true);\n  const [id, setId] = useState(\"\");\n  const [reqData, setReqData] = useState([]);\n  const [session, setSession] = useState(false);\n  useEffect(() => {\n    async function checkSession() {\n      try {\n        const instance = axios.create({\n          baseURL: \"*\",\n          timeout: 20000,\n          withCredentials: true,\n          headers: {\n            \"Content-Type\": \"application/json;charset=UTF-8\",\n            \"Access-Control-Allow-Origin\": \"*\"\n          },\n          validateStatus: function (status) {\n            return status < 500; // Resolve only if the status code is less than 500\n          }\n        });\n        const {\n          data\n        } = await instance.get(`http://localhost:3000/session`);\n        console.log(data);\n\n        if (\"error\" in data) {\n          setSession(false);\n          setLoading(false); // return;\n        } else {\n          let bytes1 = cryptojs.AES.decrypt(data._id, \"MySecretKey\");\n          console.log(bytes1);\n          let tempid = JSON.parse(bytes1.toString(cryptojs.enc.Utf8));\n          let tempid1 = localStorage.getItem(\"userSession\");\n          let bytes = cryptojs.AES.decrypt(tempid1, \"MySecretKey\");\n          console.log(bytes); // let decid = JSON.parse(temp);\n\n          let decid = JSON.parse(bytes.toString(cryptojs.enc.Utf8));\n\n          if (tempid === decid.toString()) {\n            setId(decid);\n            console.log(\"here\");\n            console.log(\"works\");\n            setSession(true);\n            setLoading(false);\n          } else {\n            setSession(false);\n            setLoading(false);\n          } // return;\n\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    if (localStorage.length !== 0) {\n      console.log(\"here\");\n      checkSession();\n\n      if (session) {\n        fetchdata();\n      } //return;\n\n    } else {\n      console.log(\"here in the outer if\");\n      setLoading(false);\n      setSession(false);\n    }\n  }, [session]);\n\n  async function fetchdata() {\n    const instance = axios.create({\n      baseURL: \"*\",\n      timeout: 20000,\n      withCredentials: true,\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      validateStatus: function (status) {\n        return status < 500; // Resolve only if the status code is less than 500\n      }\n    });\n    const resp = await instance.get(`http://localhost:3000/friend/findFriend/${id}`);\n    console.log(resp);\n\n    if (resp.data.status) {\n      setReqData(resp.data.data);\n    } else {\n      setReqData([]);\n    }\n  }\n\n  function Update() {\n    fetchdata();\n  }\n\n  console.log(reqData);\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this);\n  } else {\n    if (!session) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Friend Requests\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: reqData.length != 0 ? reqData.map(d => {\n              return /*#__PURE__*/_jsxDEV(FriendCard, {\n                receiverId: d.sender,\n                userId: id,\n                handler: Update\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 21\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-center mt-5\",\n              children: \"No request Received\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n  }\n}\n\n_s(ViewRequests, \"1CljPhFB5Rgrxam9cvGCGptDc1U=\");\n\n_c = ViewRequests;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewRequests\");","map":{"version":3,"names":["React","useState","useEffect","Navigation","FriendCard","logoImg","maleUser","femaleUser","otherUser","$","event","Modal","axios","Form","FloatingLabel","Button","Row","Col","useParams","useNavigate","Navigate","cryptojs","ViewRequests","loading","setLoading","id","setId","reqData","setReqData","session","setSession","checkSession","instance","create","baseURL","timeout","withCredentials","headers","validateStatus","status","data","get","console","log","bytes1","AES","decrypt","_id","tempid","JSON","parse","toString","enc","Utf8","tempid1","localStorage","getItem","bytes","decid","e","length","fetchdata","resp","Update","map","d","sender"],"sources":["D:/554/code-warriors/client/src/components/ViewRequests.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Navigation from \"./Navigation\";\r\nimport FriendCard from \"./FriendCard\";\r\nimport \"../App.css\";\r\nimport logoImg from \"../images/logo.gif\";\r\nimport maleUser from \"../images/male-user.svg\";\r\nimport femaleUser from \"../images/female-user.svg\";\r\nimport otherUser from \"../images/other.svg\";\r\nimport $, { event } from \"jquery\";\r\nimport { Modal } from \"bootstrap\";\r\nimport axios from \"axios\";\r\nimport { Form, FloatingLabel, Button, Row, Col } from \"react-bootstrap\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useNavigate, Navigate } from \"react-router-dom\";\r\nimport cryptojs from \"crypto-js\";\r\n\r\nexport default function ViewRequests() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [id, setId] = useState(\"\");\r\n  const [reqData, setReqData] = useState([]);\r\n\r\n  const [session, setSession] = useState(false);\r\n  useEffect(() => {\r\n    async function checkSession() {\r\n      try {\r\n        const instance = axios.create({\r\n          baseURL: \"*\",\r\n          timeout: 20000,\r\n          withCredentials: true,\r\n          headers: {\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n          },\r\n          validateStatus: function (status) {\r\n            return status < 500; // Resolve only if the status code is less than 500\r\n          },\r\n        });\r\n\r\n        const { data } = await instance.get(`http://localhost:3000/session`);\r\n        console.log(data);\r\n        if (\"error\" in data) {\r\n          setSession(false);\r\n          setLoading(false);\r\n          // return;\r\n        } else {\r\n          let bytes1 = cryptojs.AES.decrypt(data._id, \"MySecretKey\");\r\n          console.log(bytes1);\r\n          let tempid = JSON.parse(bytes1.toString(cryptojs.enc.Utf8));\r\n\r\n          let tempid1 = localStorage.getItem(\"userSession\");\r\n          let bytes = cryptojs.AES.decrypt(tempid1, \"MySecretKey\");\r\n          console.log(bytes);\r\n          // let decid = JSON.parse(temp);\r\n          let decid = JSON.parse(bytes.toString(cryptojs.enc.Utf8));\r\n\r\n          if (tempid === decid.toString()) {\r\n            setId(decid);\r\n            console.log(\"here\");\r\n            console.log(\"works\");\r\n            setSession(true);\r\n            setLoading(false);\r\n          } else {\r\n            setSession(false);\r\n            setLoading(false);\r\n          }\r\n          // return;\r\n        }\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n\r\n    if (localStorage.length !== 0) {\r\n      console.log(\"here\");\r\n      checkSession();\r\n      if (session) {\r\n        fetchdata();\r\n      }\r\n      //return;\r\n    } else {\r\n      console.log(\"here in the outer if\");\r\n      setLoading(false);\r\n      setSession(false);\r\n    }\r\n  }, [session]);\r\n\r\n  async function fetchdata() {\r\n    const instance = axios.create({\r\n      baseURL: \"*\",\r\n      timeout: 20000,\r\n      withCredentials: true,\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      validateStatus: function (status) {\r\n        return status < 500; // Resolve only if the status code is less than 500\r\n      },\r\n    });\r\n\r\n    const resp = await instance.get(\r\n      `http://localhost:3000/friend/findFriend/${id}`\r\n    );\r\n    console.log(resp);\r\n    if (resp.data.status) {\r\n      setReqData(resp.data.data);\r\n    } else {\r\n      setReqData([]);\r\n    }\r\n  }\r\n\r\n  function Update() {\r\n    fetchdata();\r\n  }\r\n  console.log(reqData);\r\n  if (loading) {\r\n    return (\r\n      <div>\r\n        <h1>Loading...</h1>\r\n      </div>\r\n    );\r\n  } else {\r\n    if (!session) {\r\n      return <Navigate to=\"/\" replace />;\r\n    } else {\r\n      return (\r\n        <>\r\n          <Navigation />\r\n          <div className=\"text-center\">\r\n            <h2>Friend Requests</h2>\r\n          </div>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              {reqData.length != 0 ? (\r\n                reqData.map((d) => {\r\n                  return (\r\n                    <FriendCard\r\n                      receiverId={d.sender}\r\n                      userId={id}\r\n                      handler={Update}\r\n                    />\r\n                  );\r\n                })\r\n              ) : (\r\n                <h3 className=\"text-center mt-5\">No request Received</h3>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAO,YAAP;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,CAAP,IAAYC,KAAZ,QAAyB,QAAzB;AACA,SAASC,KAAT,QAAsB,WAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,aAAf,EAA8BC,MAA9B,EAAsCC,GAAtC,EAA2CC,GAA3C,QAAsD,iBAAtD;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,kBAAtC;AACA,OAAOC,QAAP,MAAqB,WAArB;;;AAEA,eAAe,SAASC,YAAT,GAAwB;EAAA;;EACrC,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBvB,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAACwB,EAAD,EAAKC,KAAL,IAAczB,QAAQ,CAAC,EAAD,CAA5B;EACA,MAAM,CAAC0B,OAAD,EAAUC,UAAV,IAAwB3B,QAAQ,CAAC,EAAD,CAAtC;EAEA,MAAM,CAAC4B,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,KAAD,CAAtC;EACAC,SAAS,CAAC,MAAM;IACd,eAAe6B,YAAf,GAA8B;MAC5B,IAAI;QACF,MAAMC,QAAQ,GAAGpB,KAAK,CAACqB,MAAN,CAAa;UAC5BC,OAAO,EAAE,GADmB;UAE5BC,OAAO,EAAE,KAFmB;UAG5BC,eAAe,EAAE,IAHW;UAI5BC,OAAO,EAAE;YACP,gBAAgB,gCADT;YAEP,+BAA+B;UAFxB,CAJmB;UAQ5BC,cAAc,EAAE,UAAUC,MAAV,EAAkB;YAChC,OAAOA,MAAM,GAAG,GAAhB,CADgC,CACX;UACtB;QAV2B,CAAb,CAAjB;QAaA,MAAM;UAAEC;QAAF,IAAW,MAAMR,QAAQ,CAACS,GAAT,CAAc,+BAAd,CAAvB;QACAC,OAAO,CAACC,GAAR,CAAYH,IAAZ;;QACA,IAAI,WAAWA,IAAf,EAAqB;UACnBV,UAAU,CAAC,KAAD,CAAV;UACAN,UAAU,CAAC,KAAD,CAAV,CAFmB,CAGnB;QACD,CAJD,MAIO;UACL,IAAIoB,MAAM,GAAGvB,QAAQ,CAACwB,GAAT,CAAaC,OAAb,CAAqBN,IAAI,CAACO,GAA1B,EAA+B,aAA/B,CAAb;UACAL,OAAO,CAACC,GAAR,CAAYC,MAAZ;UACA,IAAII,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACO,QAAP,CAAgB9B,QAAQ,CAAC+B,GAAT,CAAaC,IAA7B,CAAX,CAAb;UAEA,IAAIC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd;UACA,IAAIC,KAAK,GAAGpC,QAAQ,CAACwB,GAAT,CAAaC,OAAb,CAAqBQ,OAArB,EAA8B,aAA9B,CAAZ;UACAZ,OAAO,CAACC,GAAR,CAAYc,KAAZ,EAPK,CAQL;;UACA,IAAIC,KAAK,GAAGT,IAAI,CAACC,KAAL,CAAWO,KAAK,CAACN,QAAN,CAAe9B,QAAQ,CAAC+B,GAAT,CAAaC,IAA5B,CAAX,CAAZ;;UAEA,IAAIL,MAAM,KAAKU,KAAK,CAACP,QAAN,EAAf,EAAiC;YAC/BzB,KAAK,CAACgC,KAAD,CAAL;YACAhB,OAAO,CAACC,GAAR,CAAY,MAAZ;YACAD,OAAO,CAACC,GAAR,CAAY,OAAZ;YACAb,UAAU,CAAC,IAAD,CAAV;YACAN,UAAU,CAAC,KAAD,CAAV;UACD,CAND,MAMO;YACLM,UAAU,CAAC,KAAD,CAAV;YACAN,UAAU,CAAC,KAAD,CAAV;UACD,CApBI,CAqBL;;QACD;MACF,CA3CD,CA2CE,OAAOmC,CAAP,EAAU;QACVjB,OAAO,CAACC,GAAR,CAAYgB,CAAZ;MACD;IACF;;IAED,IAAIJ,YAAY,CAACK,MAAb,KAAwB,CAA5B,EAA+B;MAC7BlB,OAAO,CAACC,GAAR,CAAY,MAAZ;MACAZ,YAAY;;MACZ,IAAIF,OAAJ,EAAa;QACXgC,SAAS;MACV,CAL4B,CAM7B;;IACD,CAPD,MAOO;MACLnB,OAAO,CAACC,GAAR,CAAY,sBAAZ;MACAnB,UAAU,CAAC,KAAD,CAAV;MACAM,UAAU,CAAC,KAAD,CAAV;IACD;EACF,CA9DQ,EA8DN,CAACD,OAAD,CA9DM,CAAT;;EAgEA,eAAegC,SAAf,GAA2B;IACzB,MAAM7B,QAAQ,GAAGpB,KAAK,CAACqB,MAAN,CAAa;MAC5BC,OAAO,EAAE,GADmB;MAE5BC,OAAO,EAAE,KAFmB;MAG5BC,eAAe,EAAE,IAHW;MAI5BC,OAAO,EAAE;QACP,gBAAgB,gCADT;QAEP,+BAA+B;MAFxB,CAJmB;MAQ5BC,cAAc,EAAE,UAAUC,MAAV,EAAkB;QAChC,OAAOA,MAAM,GAAG,GAAhB,CADgC,CACX;MACtB;IAV2B,CAAb,CAAjB;IAaA,MAAMuB,IAAI,GAAG,MAAM9B,QAAQ,CAACS,GAAT,CAChB,2CAA0ChB,EAAG,EAD7B,CAAnB;IAGAiB,OAAO,CAACC,GAAR,CAAYmB,IAAZ;;IACA,IAAIA,IAAI,CAACtB,IAAL,CAAUD,MAAd,EAAsB;MACpBX,UAAU,CAACkC,IAAI,CAACtB,IAAL,CAAUA,IAAX,CAAV;IACD,CAFD,MAEO;MACLZ,UAAU,CAAC,EAAD,CAAV;IACD;EACF;;EAED,SAASmC,MAAT,GAAkB;IAChBF,SAAS;EACV;;EACDnB,OAAO,CAACC,GAAR,CAAYhB,OAAZ;;EACA,IAAIJ,OAAJ,EAAa;IACX,oBACE;MAAA,uBACE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF;EAKD,CAND,MAMO;IACL,IAAI,CAACM,OAAL,EAAc;MACZ,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC,GAAb;QAAiB,OAAO;MAAxB;QAAA;QAAA;QAAA;MAAA,QAAP;IACD,CAFD,MAEO;MACL,oBACE;QAAA,wBACE,QAAC,UAAD;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,SAAS,EAAC,aAAf;UAAA,uBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAFF,eAKE;UAAK,SAAS,EAAC,WAAf;UAAA,uBACE;YAAK,SAAS,EAAC,KAAf;YAAA,UACGF,OAAO,CAACiC,MAAR,IAAkB,CAAlB,GACCjC,OAAO,CAACqC,GAAR,CAAaC,CAAD,IAAO;cACjB,oBACE,QAAC,UAAD;gBACE,UAAU,EAAEA,CAAC,CAACC,MADhB;gBAEE,MAAM,EAAEzC,EAFV;gBAGE,OAAO,EAAEsC;cAHX;gBAAA;gBAAA;gBAAA;cAAA,QADF;YAOD,CARD,CADD,gBAWC;cAAI,SAAS,EAAC,kBAAd;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA;UAZJ;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QALF;MAAA,gBADF;IAyBD;EACF;AACF;;GAxIuBzC,Y;;KAAAA,Y"},"metadata":{},"sourceType":"module"}