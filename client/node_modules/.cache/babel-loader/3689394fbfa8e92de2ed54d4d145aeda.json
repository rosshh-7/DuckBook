{"ast":null,"code":"var _jsxFileName = \"D:\\\\554\\\\code-warriors\\\\client\\\\src\\\\components\\\\Like.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Navigation from \"./Navigation\";\nimport \"../App.css\";\nimport logoImg from \"../images/logo.gif\";\nimport maleUser from \"../images/male-user.svg\";\nimport femaleUser from \"../images/female-user.svg\";\nimport otherUser from \"../images/other.svg\";\nimport $, { event } from \"jquery\";\nimport { Modal } from \"bootstrap\";\nimport axios from \"axios\";\nimport { Form, FloatingLabel, Button, Row, Col } from \"react-bootstrap\";\nimport { useParams } from \"react-router-dom\";\nimport cryptojs from \"crypto-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Like = props => {\n  _s();\n\n  console.log(props);\n  const [likedata, setlikedata] = useState(props.numlikes);\n  const [commentsdata, setcommentsdata] = useState(props.numcomments);\n  const [flag, setflag] = useState(undefined);\n  const [getcommentsdata, setgetcommentsdata] = useState([]);\n  const [editdataid, seteditdataid] = useState(undefined); // setlikedata(props.n);\n\n  let likecontainer,\n      commentscontainer = null;\n  let finallikes = 0;\n  let body;\n\n  async function likefunk(likeid) {\n    const instance = axios.create({\n      baseURL: \"*\",\n      timeout: 20000,\n      withCredentials: true,\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      validateStatus: function (status) {\n        return status < 500; // Resolve only if the status code is less than 500\n      }\n    });\n    const data1 = await instance.get(`http://localhost:3000/session`);\n    console.log(data1.data.id);\n    let likeobj = {\n      userID: data1.data.id\n    }; // const postdata  = await instance.get(`http://localhost:3000/posts`);\n    // console.log(postdata);\n\n    const instancelike = axios.create({\n      baseURL: \"*\",\n      timeout: 20000,\n      withCredentials: true,\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      },\n      validateStatus: function (status) {\n        return status < 500; // Resolve only if the status code is less than 500\n      }\n    });\n    await instancelike.post(`http://localhost:3000/posts/like/${likeid}`, likeobj, {\n      headers: {\n        \"Content-Type\": \"application/json;charset=UTF-8\",\n        \"Access-Control-Allow-Origin\": \"*\"\n      }\n    }).then(function (response) {\n      console.log(response.data.likes.length);\n\n      if (response.status === 200) {\n        console.log();\n        console.log();\n        setlikedata(response.data.likes.length);\n\n        if (response.data.likes.includes(data1.data.id)) {\n          document.getElementById(`${likeid}`).classList.remove(\"material-icons-outlined\");\n          document.getElementById(`${likeid}`).classList.add(\"material-icons\");\n        } else {\n          document.getElementById(`${likeid}`).classList.remove(\"material-icons\");\n          document.getElementById(`${likeid}`).classList.add(\"material-icons-outlined\");\n        }\n      } else {\n        setflag(false);\n      }\n    }).catch(function (error) {\n      console.log(error); //setSuccess(false);\n\n      alert(\"There was some error please try again\");\n    });\n  }\n\n  const openComments = param => event => {\n    let a = \"\";\n\n    if (event.target.tagName == \"BUTTON\") {\n      a = event.target.parentNode.nextElementSibling;\n    } else {\n      a = event.target.parentNode.parentNode.nextElementSibling;\n    }\n\n    a.style.display = \"block\";\n    window.setTimeout(function () {\n      a.style.opacity = 1;\n      a.style.transform = \"scale(1)\";\n    }, 0);\n  };\n\n  useEffect(() => {\n    async function getallcomments() {\n      const instance = axios.create({\n        baseURL: \"*\",\n        timeout: 20000,\n        withCredentials: true,\n        headers: {\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          \"Access-Control-Allow-Origin\": \"*\"\n        },\n        validateStatus: function (status) {\n          return status < 500; // Resolve only if the status code is less than 500\n        }\n      });\n      const seecomdata = await instance.get(`http://localhost:3000/comments/${props.mainid}`);\n      console.log(seecomdata);\n      setgetcommentsdata(seecomdata.data);\n    }\n\n    getallcomments(); // async function fetchdata() {\n    //   const instance = axios.create({\n    //     baseURL: \"*\",\n    //     timeout: 20000,\n    //     withCredentials: true,\n    //     headers: {\n    //       \"Content-Type\": \"application/json;charset=UTF-8\",\n    //       \"Access-Control-Allow-Origin\": \"*\",\n    //     },\n    //     validateStatus: function (status) {\n    //       return status < 500; // Resolve only if the status code is less than 500\n    //     },\n    //   });\n    //   const data1 = await instance.get(`http://localhost:3000/session`);\n    //   console.log(data1.data.id);\n    // for(let i=0;i<=commentsdata.length;i++){\n    //   if(commentsdata[i].likes.includes(data1.data.id)){\n    //     document\n    //     .getElementById(`${data1.data.id}`)\n    //     .classList.remove(\"material-icons-outlined\");\n    //   document\n    //     .getElementById(`${data1.data.id}`)\n    //     .classList.add(\"material-icons\");\n    //   }\n    // }\n    // }fetchdata();\n  }, []);\n  commentscontainer = getcommentsdata && getcommentsdata.map(n => {\n    async function opencommentdeltemodal(idd) {\n      const instance = axios.create({\n        baseURL: \"*\",\n        timeout: 20000,\n        withCredentials: true,\n        headers: {\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          \"Access-Control-Allow-Origin\": \"*\"\n        },\n        validateStatus: function (status) {\n          return status < 500; // Resolve only if the status code is less than 500\n        }\n      });\n      const userdata1 = await instance.get(`http://localhost:3000/session`);\n      console.log(n.userThatPostedComment._id);\n      console.log(userdata1.data.id);\n      console.log();\n\n      if (userdata1.data.id === n.userThatPostedComment._id) {\n        seteditdataid(idd);\n        let myDeleteModal1 = new Modal(document.getElementById(\"commentdeleteModal\"));\n        myDeleteModal1.show();\n      } else {\n        alert(\"You cannot delete this post.\");\n      }\n    }\n\n    async function deletecomment(delid) {\n      //delid = editdataid\n      console.log(delid);\n      const instance = axios.create({\n        baseURL: \"*\",\n        timeout: 20000,\n        withCredentials: true,\n        headers: {\n          \"Content-Type\": \"application/json;charset=UTF-8\",\n          \"Access-Control-Allow-Origin\": \"*\"\n        },\n        validateStatus: function (status) {\n          return status < 500; // Resolve only if the status code is less than 500\n        }\n      });\n      let postid = delid;\n      console.log(postid);\n      console.log(delid);\n      const userdata1 = await instance.get(`http://localhost:3000/session`);\n      const userdata2 = await instance.get(`http://localhost:3000/comments/comment/${postid}`);\n      const instance2 = axios.create({\n        baseURL: \"*\",\n        timeout: 20000,\n        withCredentials: true,\n        headers: {\n          \"Content-Type\": \"multipart/form-data; boundary=${form._boundary}\" //;charset=UTF-8\n\n        },\n        validateStatus: function (status) {\n          return status < 500; // Resolve only if the status code is less than 500\n        }\n      });\n\n      if (userdata1.data.id === userdata2.data.userThatPostedComment._id) {\n        const newseepostdata = await instance2.delete(`http://localhost:3000/comments/${postid}`).then(function (response) {\n          console.log(response.data);\n\n          if (response.status === 200) {\n            // let myDeleteModal1 = new Modal(document.getElementById('commentdeleteModal'));\n            // myDeleteModal1.hide();\n            window.location.reload();\n          }\n        }).catch(function (error) {\n          console.log(error); //setSuccess(false);\n\n          alert(\"There was some error please try again\");\n        });\n      } else {\n        alert(\"You cannot delete this comment.\");\n      } //   const seepostdata = await instance.get(\n      //     `http://localhost:3000/posts`\n      //   );\n      //   console.log(seepostdata.data);\n      //   setSeepost(seepostdata.data);\n      //   setLoading(false);\n\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-header-box align-self-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 p-lg-3 pb-0 pb-lg-0 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"aside\", {\n              className: \"material-icons messanger-dark-color post-icon\",\n              children: \"account_circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-header-box flex-grow-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 p-lg-3 ps-lg-0 w-100\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card facebook-light-gray-color p-3 border-25 user-comments-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-title\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: n.userThatPostedComment.firstName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 294,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: \"btn btn-outline-danger delete-post-btn d-flex\",\n                  onClick: () => deletecomment(n._id),\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"material-icons\",\n                    children: \"delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-subtitle\",\n                children: n.comment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 9\n    }, this);\n  }); // Similar to componentDidMount and componentDidUpdate:\n  // useEffect(() => {\n  //   // Update the document title using the browser API\n  //   if(commentsdata.likes.includes(props.mainid)){\n  //     setflag(true);\n  //   }\n  // });\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-row flex-row justify-content-between me-3 ms-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons-outlined messanger-dark-color me-2 unlike-show-btn\",\n          id: props.mainid,\n          children: \"thumb_up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary\",\n          children: likedata\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary me-2\",\n          children: commentsdata\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-secondary\",\n          children: \"comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"m-0 mt-2 mb-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-row flex-row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-primary d-flex flex-row align-self-center post-buttons border-0 justify-content-center\",\n        onClick: () => likefunk(props.mainid),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons-outlined me-2\",\n          children: \"thumb_up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Like\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-primary d-flex flex-row align-self-center post-buttons border-0 justify-content-center\",\n        onClick: e => openComments(1)(e),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"material-icons-outlined me-2\",\n          children: \"chat_bubble_outline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comments-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"m-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left-header-box\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 p-lg-3 pb-0 pb-lg-0 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"aside\", {\n              className: \"material-icons messanger-dark-color post-icon\",\n              children: \"account_circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right-header-box flex-grow-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 p-lg-3 pb-0 pb-lg-0 ps-lg-0 w-100\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: async e => {\n                e.preventDefault();\n\n                if (!body.value || body.value == null) {\n                  alert(\"Please enter the comment\");\n                  btn.disabled = false;\n                  return;\n                }\n\n                if (body.value.trim().length == 0) {\n                  alert(\"White spaces are not allowed.\");\n                  btn.disabled = false;\n                  return;\n                }\n\n                let btn = document.querySelector(\".sendComment\");\n                btn.disabled = false; // let temp = JSON.parse(user);\n\n                let flag = false; //let msg = await axios.post('http:/localhost:3000/signup', user);\n\n                const instance = axios.create({\n                  baseURL: \"*\",\n                  timeout: 20000,\n                  withCredentials: true,\n                  headers: {\n                    \"Content-Type\": \"application/json;charset=UTF-8\",\n                    \"Access-Control-Allow-Origin\": \"*\"\n                  },\n                  validateStatus: function (status) {\n                    return status < 500; // Resolve only if the status code is less than 500\n                  }\n                });\n                const data1 = await instance.get(`http://localhost:3000/session`);\n                console.log(data1.data);\n                const userdata1 = await instance.get(`http://localhost:3000/getUserData`);\n                console.log(userdata1.data);\n                let sampleonj = {\n                  firstName: userdata1.data.firstName,\n                  _id: data1.data.id\n                };\n                let formData = new FormData();\n                formData.append(\"comment\", body.value);\n                formData.append(\"userThatPostedComment\", JSON.stringify(sampleonj));\n                let user = {\n                  comment: body.value,\n                  userThatPostedComment: sampleonj\n                }; //console.log(formData.get('userThatPosted'));\n\n                const instance2 = axios.create({\n                  baseURL: \"*\",\n                  timeout: 20000,\n                  withCredentials: true,\n                  headers: {\n                    \"Content-Type\": \"application/json;charset=UTF-8\" //;charset=UTF-8\n\n                  },\n                  validateStatus: function (status) {\n                    return status < 500; // Resolve only if the status code is less than 500\n                  }\n                });\n                let postid = props.mainid;\n                await instance2.post(`http://localhost:3000/comments/${postid}`, user).then(function (response) {\n                  console.log(response.data);\n\n                  if (response.status === 200) {\n                    async function finalcom() {\n                      const numcomm = await instance.get(`http://localhost:3000/posts/${postid}`);\n                      console.log(numcomm);\n                      setcommentsdata(numcomm.data.comments.length);\n                      setgetcommentsdata(numcomm.data.comments); // alert(\"Post posted successfully!!!\");\n\n                      flag = true; // window.location.reload();\n                    }\n\n                    finalcom();\n                  }\n                }).catch(function (error) {\n                  console.log(error); //setSuccess(false);\n\n                  alert(\"There was some error please try again\");\n                });\n                e.target.reset(); //btn.disabled = false;\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control rounded-pill facebook-light-gray-color\",\n                \"aria-label\": \"Sizing example input\",\n                \"aria-describedby\": \"inputGroup-sizing-default\",\n                placeholder: \"Write Something ...\",\n                ref: node => {\n                  body = node;\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group mb-3 mt-3\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"btn btn-primary rounded-pill sendComment\",\n                  children: \"Send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 9\n      }, this), commentscontainer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Like, \"R/7ourhS2y55pbyBzvr7eqy1l3I=\");\n\n_c = Like;\nexport default Like;\n\nvar _c;\n\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["React","useState","useEffect","Navigation","logoImg","maleUser","femaleUser","otherUser","$","event","Modal","axios","Form","FloatingLabel","Button","Row","Col","useParams","cryptojs","Like","props","console","log","likedata","setlikedata","numlikes","commentsdata","setcommentsdata","numcomments","flag","setflag","undefined","getcommentsdata","setgetcommentsdata","editdataid","seteditdataid","likecontainer","commentscontainer","finallikes","body","likefunk","likeid","instance","create","baseURL","timeout","withCredentials","headers","validateStatus","status","data1","get","data","id","likeobj","userID","instancelike","post","then","response","likes","length","includes","document","getElementById","classList","remove","add","catch","error","alert","openComments","param","a","target","tagName","parentNode","nextElementSibling","style","display","window","setTimeout","opacity","transform","getallcomments","seecomdata","mainid","map","n","opencommentdeltemodal","idd","userdata1","userThatPostedComment","_id","myDeleteModal1","show","deletecomment","delid","postid","userdata2","instance2","newseepostdata","delete","location","reload","firstName","comment","e","preventDefault","value","btn","disabled","trim","querySelector","sampleonj","formData","FormData","append","JSON","stringify","user","finalcom","numcomm","comments","reset","node"],"sources":["D:/554/code-warriors/client/src/components/Like.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Navigation from \"./Navigation\";\r\nimport \"../App.css\";\r\nimport logoImg from \"../images/logo.gif\";\r\nimport maleUser from \"../images/male-user.svg\";\r\nimport femaleUser from \"../images/female-user.svg\";\r\nimport otherUser from \"../images/other.svg\";\r\nimport $, { event } from \"jquery\";\r\nimport { Modal } from \"bootstrap\";\r\nimport axios from \"axios\";\r\nimport { Form, FloatingLabel, Button, Row, Col } from \"react-bootstrap\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport cryptojs from \"crypto-js\";\r\nconst Like = (props) => {\r\n  console.log(props);\r\n\r\n  const [likedata, setlikedata] = useState(props.numlikes);\r\n\r\n  const [commentsdata, setcommentsdata] = useState(props.numcomments);\r\n\r\n  const [flag, setflag] = useState(undefined);\r\n\r\n  const [getcommentsdata, setgetcommentsdata] = useState([]);\r\n  const [editdataid, seteditdataid] = useState(undefined);\r\n  // setlikedata(props.n);\r\n  let likecontainer,\r\n    commentscontainer = null;\r\n  let finallikes = 0;\r\n  let body;\r\n\r\n\r\n\r\n  \r\n  async function likefunk(likeid) {\r\n    const instance = axios.create({\r\n      baseURL: \"*\",\r\n      timeout: 20000,\r\n      withCredentials: true,\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      validateStatus: function (status) {\r\n        return status < 500; // Resolve only if the status code is less than 500\r\n      },\r\n    });\r\n\r\n    const data1 = await instance.get(`http://localhost:3000/session`);\r\n    console.log(data1.data.id);\r\n    \r\n    let likeobj = { userID: data1.data.id };\r\n\r\n    // const postdata  = await instance.get(`http://localhost:3000/posts`);\r\n    // console.log(postdata);\r\n\r\n    const instancelike = axios.create({\r\n      baseURL: \"*\",\r\n      timeout: 20000,\r\n      withCredentials: true,\r\n      headers: {\r\n        \"Content-Type\": \"application/json;charset=UTF-8\",\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n      validateStatus: function (status) {\r\n        return status < 500; // Resolve only if the status code is less than 500\r\n      },\r\n    });\r\n\r\n    await instancelike\r\n      .post(`http://localhost:3000/posts/like/${likeid}`, likeobj, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json;charset=UTF-8\",\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n      })\r\n      .then(function (response) {\r\n        console.log(response.data.likes.length);\r\n\r\n        if (response.status === 200) {\r\n          console.log();\r\n          console.log();\r\n         \r\n          setlikedata(response.data.likes.length);\r\n          if (response.data.likes.includes(data1.data.id)) {\r\n            document\r\n              .getElementById(`${likeid}`)\r\n              .classList.remove(\"material-icons-outlined\");\r\n            document\r\n              .getElementById(`${likeid}`)\r\n              .classList.add(\"material-icons\");\r\n          } else {\r\n            document\r\n              .getElementById(`${likeid}`)\r\n              .classList.remove(\"material-icons\");\r\n            document\r\n              .getElementById(`${likeid}`)\r\n              .classList.add(\"material-icons-outlined\");\r\n          }\r\n        }else{\r\n          setflag(false);\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n        //setSuccess(false);\r\n        alert(\"There was some error please try again\");\r\n      });\r\n  }\r\n\r\n  const openComments = (param) => (event) => {\r\n    let a = \"\";\r\n    if (event.target.tagName == \"BUTTON\") {\r\n      a = event.target.parentNode.nextElementSibling;\r\n    } else {\r\n      a = event.target.parentNode.parentNode.nextElementSibling;\r\n    }\r\n    a.style.display = \"block\";\r\n    window.setTimeout(function () {\r\n      a.style.opacity = 1;\r\n      a.style.transform = \"scale(1)\";\r\n    }, 0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function getallcomments() {\r\n      const instance = axios.create({\r\n        baseURL: \"*\",\r\n        timeout: 20000,\r\n        withCredentials: true,\r\n        headers: {\r\n          \"Content-Type\": \"application/json;charset=UTF-8\",\r\n          \"Access-Control-Allow-Origin\": \"*\",\r\n        },\r\n        validateStatus: function (status) {\r\n          return status < 500; // Resolve only if the status code is less than 500\r\n        },\r\n      });\r\n\r\n      const seecomdata = await instance.get(\r\n        `http://localhost:3000/comments/${props.mainid}`\r\n      );\r\n      console.log(seecomdata);\r\n      setgetcommentsdata(seecomdata.data);\r\n    }\r\n    getallcomments();\r\n\r\n    // async function fetchdata() {\r\n    //   const instance = axios.create({\r\n    //     baseURL: \"*\",\r\n    //     timeout: 20000,\r\n    //     withCredentials: true,\r\n    //     headers: {\r\n    //       \"Content-Type\": \"application/json;charset=UTF-8\",\r\n    //       \"Access-Control-Allow-Origin\": \"*\",\r\n    //     },\r\n    //     validateStatus: function (status) {\r\n    //       return status < 500; // Resolve only if the status code is less than 500\r\n    //     },\r\n    //   });\r\n\r\n    //   const data1 = await instance.get(`http://localhost:3000/session`);\r\n    //   console.log(data1.data.id);\r\n\r\n\r\n      \r\n    // for(let i=0;i<=commentsdata.length;i++){\r\n    //   if(commentsdata[i].likes.includes(data1.data.id)){\r\n    //     document\r\n    //     .getElementById(`${data1.data.id}`)\r\n    //     .classList.remove(\"material-icons-outlined\");\r\n    //   document\r\n    //     .getElementById(`${data1.data.id}`)\r\n    //     .classList.add(\"material-icons\");\r\n    //   }\r\n    // }\r\n    \r\n    // }fetchdata();\r\n  }, []);\r\n\r\n  commentscontainer =\r\n    getcommentsdata &&\r\n    getcommentsdata.map((n) => {\r\n      async function opencommentdeltemodal(idd) {\r\n        const instance = axios.create({\r\n          baseURL: \"*\",\r\n          timeout: 20000,\r\n          withCredentials: true,\r\n          headers: {\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n          },\r\n          validateStatus: function (status) {\r\n            return status < 500; // Resolve only if the status code is less than 500\r\n          },\r\n        });\r\n        const userdata1 = await instance.get(`http://localhost:3000/session`);\r\n        console.log(n.userThatPostedComment._id);\r\n        console.log(userdata1.data.id);\r\n        console.log();\r\n        if (userdata1.data.id === n.userThatPostedComment._id) {\r\n          seteditdataid(idd);\r\n          let myDeleteModal1 = new Modal(\r\n            document.getElementById(\"commentdeleteModal\")\r\n          );\r\n          myDeleteModal1.show();\r\n        } else {\r\n          alert(\"You cannot delete this post.\");\r\n        }\r\n      }\r\n\r\n      \r\n\r\n      async function deletecomment(delid) {\r\n        //delid = editdataid\r\n        console.log(delid);\r\n        const instance = axios.create({\r\n          baseURL: \"*\",\r\n          timeout: 20000,\r\n          withCredentials: true,\r\n          headers: {\r\n            \"Content-Type\": \"application/json;charset=UTF-8\",\r\n            \"Access-Control-Allow-Origin\": \"*\",\r\n          },\r\n          validateStatus: function (status) {\r\n            return status < 500; // Resolve only if the status code is less than 500\r\n          },\r\n        });\r\n\r\n        let postid = delid;\r\n        console.log(postid);\r\n        console.log(delid);\r\n        const userdata1 = await instance.get(`http://localhost:3000/session`);\r\n        const userdata2 = await instance.get(\r\n          `http://localhost:3000/comments/comment/${postid}`\r\n        );\r\n        const instance2 = axios.create({\r\n          baseURL: \"*\",\r\n          timeout: 20000,\r\n          withCredentials: true,\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data; boundary=${form._boundary}\",\r\n            //;charset=UTF-8\r\n          },\r\n          validateStatus: function (status) {\r\n            return status < 500; // Resolve only if the status code is less than 500\r\n          },\r\n        });\r\n        if (userdata1.data.id === userdata2.data.userThatPostedComment._id) {\r\n          const newseepostdata = await instance2\r\n            .delete(`http://localhost:3000/comments/${postid}`)\r\n            .then(function (response) {\r\n              console.log(response.data);\r\n\r\n              if (response.status === 200) {\r\n                // let myDeleteModal1 = new Modal(document.getElementById('commentdeleteModal'));\r\n                // myDeleteModal1.hide();\r\n                window.location.reload();\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              //setSuccess(false);\r\n              alert(\"There was some error please try again\");\r\n            });\r\n        } else {\r\n          alert(\"You cannot delete this comment.\");\r\n        }\r\n\r\n        //   const seepostdata = await instance.get(\r\n        //     `http://localhost:3000/posts`\r\n        //   );\r\n        //   console.log(seepostdata.data);\r\n        //   setSeepost(seepostdata.data);\r\n        //   setLoading(false);\r\n      }\r\n\r\n      return (\r\n        <div>\r\n          \r\n\r\n          <div className=\"post-row\">\r\n            <div className=\"left-header-box align-self-center\">\r\n              <div className=\"p-2 p-lg-3 pb-0 pb-lg-0 text-center\">\r\n                <aside className=\"material-icons messanger-dark-color post-icon\">\r\n                  account_circle\r\n                </aside>\r\n              </div>\r\n            </div>\r\n            <div className=\"right-header-box flex-grow-1\">\r\n              <div className=\"p-2 p-lg-3 ps-lg-0 w-100\">\r\n                <div className=\"card facebook-light-gray-color p-3 border-25 user-comments-card\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <p className=\"card-title\">\r\n                      <strong>{n.userThatPostedComment.firstName}</strong>\r\n                    </p>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-danger delete-post-btn d-flex\"\r\n                      onClick={() => deletecomment(n._id)}\r\n                    >\r\n                      <span className=\"material-icons\">delete</span>\r\n                    </button>\r\n                  </div>\r\n                  <p className=\"card-subtitle\">{n.comment}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n\r\n  // Similar to componentDidMount and componentDidUpdate:\r\n  // useEffect(() => {\r\n  //   // Update the document title using the browser API\r\n  //   if(commentsdata.likes.includes(props.mainid)){\r\n  //     setflag(true);\r\n  //   }\r\n  // });\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <div className=\"post-row flex-row justify-content-between me-3 ms-3\">\r\n        <div className=\"d-flex flex-row\">\r\n        \r\n          <span\r\n            className=\"material-icons-outlined messanger-dark-color me-2 unlike-show-btn\"\r\n            id={props.mainid}\r\n          >\r\n            thumb_up\r\n          </span>\r\n          \r\n          <p className=\"text-secondary\">{likedata}</p>\r\n        </div>\r\n        <div className=\"d-flex flex-row\">\r\n          <p className=\"text-secondary me-2\">{commentsdata}</p>\r\n          <p className=\"text-secondary\">comments</p>\r\n        </div>\r\n      </div>\r\n      <hr className=\"m-0 mt-2 mb-0\"></hr>\r\n      <div className=\"post-row flex-row\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-primary d-flex flex-row align-self-center post-buttons border-0 justify-content-center\"\r\n          onClick={() => likefunk(props.mainid)}\r\n        >\r\n          <span className=\"material-icons-outlined me-2\">thumb_up</span>\r\n          <span>Like</span>\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-primary d-flex flex-row align-self-center post-buttons border-0 justify-content-center\"\r\n          onClick={(e) => openComments(1)(e)}\r\n        >\r\n          <span className=\"material-icons-outlined me-2\">\r\n            chat_bubble_outline\r\n          </span>\r\n          <span>Comment</span>\r\n        </button>\r\n      </div>\r\n      <div className=\"comments-box\">\r\n        <hr className=\"m-0\"></hr>\r\n        <div className=\"post-row\">\r\n          <div className=\"left-header-box\">\r\n            <div className=\"p-2 p-lg-3 pb-0 pb-lg-0 text-center\">\r\n              <aside className=\"material-icons messanger-dark-color post-icon\">\r\n                account_circle\r\n              </aside>\r\n            </div>\r\n          </div>\r\n          <div className=\"right-header-box flex-grow-1\">\r\n            <div className=\"p-2 p-lg-3 pb-0 pb-lg-0 ps-lg-0 w-100\">\r\n              <form\r\n                onSubmit={async (e) => {\r\n                  e.preventDefault();\r\n\r\n                  if (!body.value || body.value == null) {\r\n                    alert(\"Please enter the comment\");\r\n                    btn.disabled = false;\r\n                    return;\r\n                  }\r\n                  if (body.value.trim().length == 0) {\r\n                    alert(\"White spaces are not allowed.\");\r\n                    btn.disabled = false;\r\n                    return;\r\n                  }\r\n\r\n                  let btn = document.querySelector(\".sendComment\");\r\n                  btn.disabled = false;\r\n                  // let temp = JSON.parse(user);\r\n                  let flag = false;\r\n\r\n                  //let msg = await axios.post('http:/localhost:3000/signup', user);\r\n\r\n                  const instance = axios.create({\r\n                    baseURL: \"*\",\r\n                    timeout: 20000,\r\n                    withCredentials: true,\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                      \"Access-Control-Allow-Origin\": \"*\",\r\n                    },\r\n                    validateStatus: function (status) {\r\n                      return status < 500; // Resolve only if the status code is less than 500\r\n                    },\r\n                  });\r\n\r\n                  const data1 = await instance.get(\r\n                    `http://localhost:3000/session`\r\n                  );\r\n                  console.log(data1.data);\r\n\r\n                  const userdata1 = await instance.get(\r\n                    `http://localhost:3000/getUserData`\r\n                  );\r\n                  console.log(userdata1.data);\r\n\r\n                  let sampleonj = {\r\n                    firstName: userdata1.data.firstName,\r\n                    _id: data1.data.id,\r\n                  };\r\n\r\n                  let formData = new FormData();\r\n                  formData.append(\"comment\", body.value);\r\n                  formData.append(\r\n                    \"userThatPostedComment\",\r\n                    JSON.stringify(sampleonj)\r\n                  );\r\n                  let user = {\r\n                    comment: body.value,\r\n                    userThatPostedComment: sampleonj,\r\n                  };\r\n\r\n                  //console.log(formData.get('userThatPosted'));\r\n                  const instance2 = axios.create({\r\n                    baseURL: \"*\",\r\n                    timeout: 20000,\r\n                    withCredentials: true,\r\n                    headers: {\r\n                      \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                      //;charset=UTF-8\r\n                    },\r\n                    validateStatus: function (status) {\r\n                      return status < 500; // Resolve only if the status code is less than 500\r\n                    },\r\n                  });\r\n                  let postid = props.mainid;\r\n                  await instance2\r\n                    .post(`http://localhost:3000/comments/${postid}`, user)\r\n                    .then(function (response) {\r\n                      console.log(response.data);\r\n\r\n                      if (response.status === 200) {\r\n                        async function finalcom() {\r\n                          const numcomm = await instance.get(\r\n                            `http://localhost:3000/posts/${postid}`\r\n                          );\r\n\r\n                          console.log(numcomm);\r\n                          setcommentsdata(numcomm.data.comments.length);\r\n                          setgetcommentsdata(numcomm.data.comments);\r\n                          // alert(\"Post posted successfully!!!\");\r\n                          flag = true;\r\n                          // window.location.reload();\r\n                        }\r\n                        finalcom();\r\n                      }\r\n                    })\r\n                    .catch(function (error) {\r\n                      console.log(error);\r\n                      //setSuccess(false);\r\n                      alert(\"There was some error please try again\");\r\n                    });\r\n\r\n                  e.target.reset();\r\n                  //btn.disabled = false;\r\n                }}\r\n              >\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control rounded-pill facebook-light-gray-color\"\r\n                  aria-label=\"Sizing example input\"\r\n                  aria-describedby=\"inputGroup-sizing-default\"\r\n                  placeholder=\"Write Something ...\"\r\n                  ref={(node) => {\r\n                    body = node;\r\n                  }}\r\n                />\r\n                <div className=\"input-group mb-3 mt-3\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary rounded-pill sendComment\"\r\n                  >\r\n                    Send\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {commentscontainer}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Like;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}